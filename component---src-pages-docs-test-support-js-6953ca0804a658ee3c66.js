webpackJsonp([0x6ed22d977de3],{"./node_modules/raw-loader/index.js!./src/pages/docs/examples/plugins/injection-using.tsx":function(e,t){e.exports="import * as React from 'react'\nimport { controller } from '@brightinteractive/bright-js-framework'\nimport { eventManager, EventManager } from '../plugins/EventManager'\nimport { Button } from './widgets'\n\n@controller()\nexport class ControlPanel extends React.PureComponent {\n  @eventManager\n  eventManager: EventManager\n\n  handleOpenClick = () => {\n    this.eventManager.emit('request-open-pod-bay-doors')\n  }\n\n  componentDidMount() {\n    this.eventManager.registerHandler('request-open-pod-bay-doors', () => {\n      console.error('I’m sorry but I can’t do that, Dave')\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>Pod Bay doors:</h3>\n        <Button onClick={this.handleOpenClick}>Open</Button>\n      </div>\n    )\n  }\n}\n"},"./node_modules/raw-loader/index.js!./src/pages/docs/examples/test-support/after.tsx":function(e,t){e.exports="import { expect } from 'chai'\nimport * as React from 'react'\nimport { TestFixture } from '@brightinteractive/bright-js-framework/test-utils'\nimport { ControlPanel } from './ControlPanel'\nimport EventManagerPlugin from '../plugins/EventManager'\n\ndescribe('ControlPanel', () => {\n  it('posts message when button is clicked', (done) => {\n    const fixture = new TestFixture({\n      plugins: [EventManagerPlugin],\n      markup: (\n        <ControlPanel />\n      )\n    })\n\n    fixture.stub(EventManagerPlugin, (plugin) => {\n      plugin.eventManager.registerHandler('request-open-pod-bay-doors', () => {\n        done()\n      })\n    })\n\n    fixture.render().closest('button').simulate('click')\n  })\n})\n"},"./node_modules/raw-loader/index.js!./src/pages/docs/examples/test-support/before.tsx":function(e,t){e.exports="import { expect } from 'chai'\nimport * as React from 'react'\nimport { mount } from 'enzyme'\nimport { ControlPanel } from './ControlPanel'\n\ndescribe('ControlPanel', () => {\n  it('posts message when button is clicked', () => {\n    const dom = mount(<ControlPanel />)\n    dom.closest('button').simulate('click')\n  })\n})\n"},'./node_modules/babel-loader/lib/index.js?{"plugins":["/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js","/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/babel-plugin-add-module-exports/lib/index.js","/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/babel-plugin-transform-object-assign/lib/index.js"],"presets":[["/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/babel-preset-env/lib/index.js",{"loose":true,"uglify":true,"modules":"commonjs","targets":{"browsers":["> 1%","last 2 versions","IE >= 9"]},"exclude":["transform-regenerator","transform-es2015-typeof-symbol"]}],"/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/babel-preset-stage-0/lib/index.js","/home/travis/build/brightinteractive/bright-js-framework/docs-site/node_modules/babel-preset-react/lib/index.js"],"cacheDirectory":true}!./src/pages/docs/test-support.js':function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var s=n("./node_modules/react/react.js"),a=r(s),i=n("./node_modules/gatsby-link/index.js"),l=(o(i),n("./src/components/Section.js")),d=n("./src/components/Headers.js"),c=n("./src/components/CodeBlock.js");t.default=function(){return a.createElement("div",null,a.createElement(d.PageHeader,null,"Test Support"),a.createElement(l.Section,{alwaysExpanded:!0,title:"Testing Controllers"},a.createElement("p",null,"Previously, we looked at using plugins to add application-level behavior. This presents us with a problem when we come to test components that depend on plugins."),a.createElement("p",null,"Let’s take a look at the ControlPanel component that we built previously:"),a.createElement(c.CodeFile,{path:"/src/components/ControlPanel.tsx"},n("./node_modules/raw-loader/index.js!./src/pages/docs/examples/plugins/injection-using.tsx")),a.createElement("p",null,"As a slightly contrived example of a test, let’s imagine that we want to verify that when the button is clicked, it dispatches the appropriate event."),a.createElement(c.CodeFile,{path:"/src/components/ControlPanel.test.tsx"},n("./node_modules/raw-loader/index.js!./src/pages/docs/examples/test-support/before.tsx")),a.createElement("p",null,"This test will throw an exception. The ControlPanel component is expecting to receive the EventManager instance from a plugin, but we haven't provided this plugin to the test case."),a.createElement("p",null,"Bright-js-framework provides the TestFixture class to help with this. Let’s rewrite this test case using the TestFixture class to provide an EventManager to the test:"),a.createElement(c.CodeFile,{path:"/src/components/ControlPanel.test.tsx"},n("./node_modules/raw-loader/index.js!./src/pages/docs/examples/test-support/after.tsx"))))},e.exports=t.default}});
//# sourceMappingURL=component---src-pages-docs-test-support-js-6953ca0804a658ee3c66.js.map